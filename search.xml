<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2022/05/30/sql%20note/"/>
      <url>/2022/05/30/sql%20note/</url>
      
        <content type="html"><![CDATA[<h2 id="Database"><a href="#Database" class="headerlink" title="Database"></a>Database</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">net <span class="keyword">start</span> mysql#连接服务器</span><br><span class="line">net stop mysql#关闭服务器</span><br><span class="line"></span><br><span class="line">mysql <span class="operator">-</span>uroot <span class="operator">-</span>p#登陆，密码hyx14131413</span><br><span class="line"></span><br><span class="line">#查看数据库</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES;#查看数据库，设有 test_db、db_test、db_test_db 三个数据库</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES <span class="keyword">LIKE</span> <span class="string">'test_db'</span>;#查看与 test_db 完全匹配的数据库</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES <span class="keyword">LIKE</span> <span class="string">'%test%'</span>;#查看名字中包含 test 的数据库</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES <span class="keyword">LIKE</span> <span class="string">'db%'</span>;#查看名字以 db 开头的数据库</span><br><span class="line"></span><br><span class="line">#创建数据库</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] new_database#数据库为.<span class="keyword">sql</span>文件，文件不存在时才会创建</span><br><span class="line">[<span class="keyword">DEFAULT</span>] <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8#设置字符集为utf8，不指定使用默认字符集</span><br><span class="line">[<span class="keyword">DEFAULT</span>] <span class="keyword">COLLATE</span> utf8_chinese_ci;#制定默认校对规则（简体中文，不区分大小写）</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE new_database;#查看数据库的定义声明</span><br><span class="line"></span><br><span class="line">#修改数据库</span><br><span class="line"><span class="keyword">ALTER</span> DATABASE [数据库名] { </span><br><span class="line">[ <span class="keyword">DEFAULT</span> ] <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">&lt;</span>字符集名<span class="operator">&gt;</span> <span class="operator">|</span></span><br><span class="line">[ <span class="keyword">DEFAULT</span> ] <span class="keyword">COLLATE</span> <span class="operator">&lt;</span>校对规则名<span class="operator">&gt;</span>}</span><br><span class="line"></span><br><span class="line">#删除数据库</span><br><span class="line"><span class="keyword">DROP</span> DATABASE [IF <span class="keyword">EXISTS</span>] new_database#删除new_database数据库，无法恢复，删除前注意备份</span><br><span class="line"></span><br><span class="line">#选择数据库</span><br><span class="line">USE new_database</span><br></pre></td></tr></tbody></table></figure><h2 id="Table"><a href="#Table" class="headerlink" title="Table"></a>Table</h2><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#创建表</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> website (</span><br><span class="line">    id      <span class="type">INT</span>              <span class="keyword">NOT</span> <span class="keyword">NULL</span>   AUTO_INCREMENT,#id列，<span class="type">int</span>数据类型,非空，自动增长序列</span><br><span class="line">    name    <span class="type">VARCHAR</span>(<span class="number">20</span>)      <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    url     <span class="type">VARCHAR</span>(<span class="number">30</span>)                 <span class="keyword">DEFAULT</span> <span class="string">''</span>,#设置默认值</span><br><span class="line">    age     TINYINT UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    alexa   <span class="type">INT</span> UNSIGNED     <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    uv      <span class="type">FLOAT</span>                       <span class="keyword">DEFAULT</span> <span class="string">'0'</span>,</span><br><span class="line">    country <span class="type">CHAR</span>(<span class="number">3</span>)          <span class="keyword">NOT</span> <span class="keyword">NULL</span>   <span class="keyword">DEFAULT</span> <span class="string">''</span>,</span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`)#设置主键</span><br><span class="line">    <span class="keyword">UNIQUE</span> (<span class="string">'url'</span>)</span><br><span class="line">);</span><br><span class="line">#查询表的结构</span><br><span class="line"><span class="keyword">DESC</span> website;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*表约束</span></span><br><span class="line"><span class="comment">NOT NULL：指示某列不能存储 NULL 值</span></span><br><span class="line"><span class="comment">UNIQUE：保证某列的每行必须有唯一的值</span></span><br><span class="line"><span class="comment">PRIMARY KEY：NOT NULL 和 UNIQUE 的结合</span></span><br><span class="line"><span class="comment">FOREIGN KEY：保证一个表中的数据匹配另一个表中的值的参照完整性</span></span><br><span class="line"><span class="comment">CHECK：保证列中的值符合指定的条件</span></span><br><span class="line"><span class="comment">DEFAULT：规定没有给列赋值时的默认值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">#删除表</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> webiste;</span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> table_name#删除表内数据</span><br><span class="line"></span><br><span class="line">#表重命名</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> website RENAME <span class="keyword">TO</span> tb_website;</span><br><span class="line">RENAME website <span class="keyword">TO</span> tb_website;</span><br><span class="line">#修改表约束，（在表名后需要加数据类型）</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tableName MODIFY attributes datatype Constraints</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tableName <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> (attribute)#设置<span class="keyword">UNIQUE</span>约束</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tableName <span class="keyword">DROP</span> INDEX (attribute)#取消<span class="keyword">UNIQUE</span>约束</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (P_Id) <span class="keyword">REFERENCES</span> Persons(P_Id)<span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE #设置外键<span class="comment">--级联删除</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Orders <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (P_Id) <span class="keyword">REFERENCES</span> Persons(P_Id)#设置外键</span><br><span class="line">#导入表,从D:<span class="operator">/</span>downloads中导入access_log表</span><br><span class="line"> SOURCE D:<span class="operator">/</span>downloads<span class="operator">/</span>access_log.sql;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#选择Webistes表中的name, country列值为CN的记录</span><br><span class="line"><span class="keyword">SELECT</span> name,country <span class="keyword">FROM</span> Websites <span class="keyword">WHERE</span> country<span class="operator">=</span><span class="string">'CN'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> country <span class="keyword">FROM</span> Websites;#从"Websites"表的"country"列中选取唯一不同的值</span><br><span class="line">#运算符：<span class="operator">=</span>、<span class="operator">!=</span>或(<span class="operator">&lt;&gt;</span>)、<span class="operator">&gt;</span>、<span class="operator">&lt;</span>、<span class="operator">&gt;=</span>、<span class="operator">&lt;=</span>、<span class="keyword">BETWEEN</span>（某个范围）、<span class="keyword">LIKE</span>（某种模式）、<span class="keyword">IN</span>（多个可能值）</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> Websites <span class="keyword">where</span> country <span class="keyword">in</span> (<span class="string">'CN'</span>,<span class="string">'USA'</span>);</span><br><span class="line">#使用<span class="keyword">AND</span>、<span class="keyword">OR</span></span><br><span class="line"></span><br><span class="line">#数据库排序，从Webistes表选取所有网站，并按照 "alexa" 列排序，默认升序，可以选择多列，使用<span class="keyword">DESC</span>关键字表示降序</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Websites <span class="keyword">ORDER</span> <span class="keyword">BY</span> alexa <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">#添加记录</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name <span class="keyword">VALUES</span> (value1,value2,value3,...);#无需指定要插入数据的列名，只需提供被插入的值即可</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column1,column2,column3,...) <span class="keyword">VALUES</span> (value1,value2,value3,...);#指定列名及被插入的值</span><br><span class="line">#插入新表</span><br><span class="line">#将websites表中country值为CN的记录放进new_website表，要求new_websites存在</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> new_websites <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> websites <span class="keyword">WHERE</span> country<span class="operator">=</span><span class="string">'CN'</span>;</span><br><span class="line">#也是插入一行,要求表new_websites 不存在</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">INTO</span> new_websites <span class="keyword">FROM</span> websites <span class="keyword">WHERE</span> country<span class="operator">=</span><span class="string">'CN'</span>;</span><br><span class="line"></span><br><span class="line">#更新记录,更新name为菜鸟教程的记录的alexa为<span class="number">5000</span>，country为USA，若没有<span class="keyword">WHERE</span>，会修改所有记录</span><br><span class="line"><span class="keyword">UPDATE</span> Websites <span class="keyword">SET</span> alexa<span class="operator">=</span><span class="string">'5000'</span>, country<span class="operator">=</span><span class="string">'USA'</span>  <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="string">'菜鸟教程'</span>;</span><br><span class="line"><span class="keyword">set</span> sql_safe_updates<span class="operator">=</span><span class="number">1</span>; #该参数开启的情况下，必须在<span class="keyword">update</span> 语句后携带 <span class="keyword">where</span> 条件，否则就会报错</span><br><span class="line"></span><br><span class="line">#删除记录,从 "Websites" 表中删除网站名为 "Facebook" 且国家为 USA 的网站。</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> websites <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="string">'Facebook'</span> <span class="keyword">AND</span> country<span class="operator">=</span><span class="string">'USA'</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="operator">*</span> <span class="keyword">FROM</span> table_name;#删除所有记录</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Websites LIMIT <span class="number">2</span>;#选取头两条记录</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> websites <span class="keyword">ORDER</span> <span class="keyword">BY</span> id <span class="keyword">DESC</span> LIMIT <span class="number">2</span>;#变相返回后<span class="number">2</span>行</span><br><span class="line"></span><br><span class="line"><span class="comment">/*通配符（与SQL LIKE一起使用）：</span></span><br><span class="line"><span class="comment">%：替代 0 个或多个字符；</span></span><br><span class="line"><span class="comment">_：替代 1 个字符</span></span><br><span class="line"><span class="comment">[charlist]:字符列中的任何单一字符</span></span><br><span class="line"><span class="comment">[^charlist] or [!charlist]：不在字符列中的任何单一字符</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> websites <span class="keyword">where</span> name regexp <span class="string">'^[A-H]'</span>;#选取 name 以 A 到 H 字母开头的网站</span><br><span class="line"></span><br><span class="line">#选取name为"Google"或"菜鸟教程"或"淘宝"的所有网站</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Websites <span class="keyword">WHERE</span> name <span class="keyword">IN</span> (<span class="string">'Google'</span>,<span class="string">'菜鸟教程'</span>,<span class="string">'淘宝'</span>);</span><br><span class="line">#选取alexa(不)介于 <span class="number">1</span> 和 <span class="number">200</span> 之间的所有网站</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Websites <span class="keyword">WHERE</span> alexa (<span class="keyword">NOT</span>) <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">200</span>;</span><br><span class="line">#选取 alexa 介于 <span class="number">1</span> 和 <span class="number">20</span> 之间但 country 不为 USA 和 IND 的所有网站：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> websites <span class="keyword">WHERE</span> (alexa <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">200</span>) <span class="keyword">AND</span> country <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="string">'USA'</span>,<span class="string">'IND'</span>);</span><br><span class="line">#选取 access表中<span class="type">date</span> 介于 <span class="string">'2016-05-10'</span> 和 <span class="string">'2016-05-14'</span> 之间的所有访问记录</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> access <span class="keyword">WHERE</span> <span class="type">date</span> <span class="keyword">BETWEEN</span> <span class="string">'2016-05-10'</span> <span class="keyword">AND</span> <span class="string">'2016-05-14'</span>;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span>别名</span><br><span class="line"><span class="keyword">SELECT</span> column_name <span class="keyword">AS</span> alias_name <span class="keyword">FROM</span> table_name;#列的别名</span><br><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table_name <span class="keyword">AS</span> alias_name;#表的别名</span><br><span class="line"><span class="keyword">select</span> name <span class="keyword">as</span> n, country <span class="keyword">as</span> c <span class="keyword">from</span> websites;#展示name和country列并起名为n,c</span><br><span class="line">#把三个列（url、alexa 和 country）结合在一起，并创建一个名为 "site_info" 的别名，中间由<span class="string">'|'</span>和<span class="string">'，'</span>连接</span><br><span class="line"><span class="keyword">SELECT</span> name, CONCAT(url, <span class="string">'| '</span>, alexa, <span class="string">', '</span>, country) <span class="keyword">AS</span> site_info <span class="keyword">FROM</span> Websites;</span><br><span class="line">#选取 "菜鸟教程" 的所有访问记录,并为websites和access指定别名w和a，将两个表一一对应的记录连接起来</span><br><span class="line"><span class="keyword">SELECT</span> w.name, w.url, a.count, a.date <span class="keyword">FROM</span> Websites <span class="keyword">AS</span> w, access_log <span class="keyword">AS</span> a <span class="keyword">WHERE</span> a.site_id<span class="operator">=</span>w.id <span class="keyword">and</span> w.name<span class="operator">=</span>"菜鸟教程";</span><br></pre></td></tr></tbody></table></figure><h2 id="JOIN"><a href="#JOIN" class="headerlink" title="JOIN"></a>JOIN</h2><p><strong>A inner join B</strong> 取交集。</p><p><strong>A left join B</strong> 取 A 全部，B 没有对应的值为 null。</p><p><strong>A right join B</strong> 取 B 全部 A 没有对应的值为 null。</p><p><strong>A full outer join B</strong> 取并集，彼此没有对应的值为 null。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*INNER JOIN 关键字在表中存在至少一个匹配时返回行。</span></span><br><span class="line"><span class="comment">INNER JOIN 关键字在表中存在至少一个匹配时返回行。如果 "Websites" 表中的行在 "access" 中没有匹配，则不会列出这些行。</span></span><br><span class="line"><span class="comment">on 条件是在生成临时表时使用的条件;</span></span><br><span class="line"><span class="comment">where 条件是在临时表生成好后，再对临时表进行过滤的条件。*/</span></span><br><span class="line"><span class="keyword">SELECT</span> w.name, a.count,a.date <span class="keyword">FROM</span> websites <span class="keyword">as</span> w <span class="keyword">INNER</span> <span class="keyword">JOIN</span> access <span class="keyword">as</span> a <span class="keyword">ON</span> w.id<span class="operator">=</span>a.site_id <span class="keyword">order</span> <span class="keyword">by</span> a.count <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">#<span class="keyword">LEFT</span> <span class="keyword">JOIN</span> 关键字从左表（table1）返回所有的行，即使右表（table2）中没有匹配。如果右表中没有匹配，则结果为 <span class="keyword">NULL</span>。</span><br><span class="line"><span class="keyword">SELECT</span> w.name, a.count,a.date <span class="keyword">FROM</span> websites <span class="keyword">as</span> w <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> access <span class="keyword">as</span> a <span class="keyword">ON</span> w.id<span class="operator">=</span>a.site_id <span class="keyword">order</span> <span class="keyword">by</span> a.count <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">#<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> 关键字从右表（table2）返回所有的行，即使左表（table1）中没有匹配。如果左表中没有匹配，则结果为 <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> w.name, a.count,a.date <span class="keyword">FROM</span> websites <span class="keyword">as</span> w <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> access <span class="keyword">as</span> a <span class="keyword">ON</span> w.id<span class="operator">=</span>a.site_id <span class="keyword">order</span> <span class="keyword">by</span> a.count <span class="keyword">DESC</span>;</span><br><span class="line">#等价于</span><br><span class="line"><span class="keyword">SELECT</span> w.name, a.count,a.date <span class="keyword">FROM</span> access <span class="keyword">as</span> a <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> websites <span class="keyword">as</span> w <span class="keyword">ON</span> w.id<span class="operator">=</span>a.site_id <span class="keyword">order</span> <span class="keyword">by</span> a.count <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*FULL OUTER JOIN 关键字只要左表（table1）和右表（table2）其中一个表中存在匹配，则返回行</span></span><br><span class="line"><span class="comment">FULL OUTER JOIN 关键字结合了 LEFT JOIN 和 RIGHT JOIN 的结果。*/</span></span><br><span class="line"><span class="keyword">SELECT</span> w.name, a.count,a.date <span class="keyword">FROM</span> websites <span class="keyword">as</span> w <span class="keyword">FULL</span> <span class="keyword">JOIN</span> access <span class="keyword">as</span> a <span class="keyword">ON</span> w.id<span class="operator">=</span>a.site_id <span class="keyword">order</span> <span class="keyword">by</span> a.count <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*UNION 操作符用于合并两个或多个 SELECT 语句的结果集。</span></span><br><span class="line"><span class="comment">UNION 内部的每个 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每个 SELECT 语句中的列的顺序必须相同。</span></span><br><span class="line"><span class="comment">默认地，UNION 操作符选取不同的值。如果允许重复的值，使用 UNION ALL。</span></span><br><span class="line"><span class="comment">UNION 结果集中的列名总是等于 UNION 中第一个 SELECT 语句中的列名。*/</span></span><br><span class="line"><span class="keyword">SELECT</span> url,country <span class="keyword">FROM</span> websites <span class="keyword">WHERE</span> country<span class="operator">=</span><span class="string">'CN'</span> <span class="keyword">UNION</span> <span class="keyword">SELECT</span> url,country <span class="keyword">FROM</span> apps <span class="keyword">order</span> <span class="keyword">by</span> country <span class="keyword">DESC</span>;</span><br></pre></td></tr></tbody></table></figure><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="SELECT-INTO"><a href="#SELECT-INTO" class="headerlink" title="SELECT INTO"></a>SELECT INTO</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 新表 <span class="keyword">AS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 旧表 </span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> apps (app_name,url,country) <span class="keyword">SELECT</span> name,url,country <span class="keyword">FROM</span> websites <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="string">'菜鸟教程'</span>;</span><br></pre></td></tr></tbody></table></figure><h3 id="CREATE-INDEX"><a href="#CREATE-INDEX" class="headerlink" title="CREATE INDEX"></a>CREATE INDEX</h3><p>CREATE INDEX 语句用于在表中创建索引。在不读取整个表的情况下，索引使数据库应用程序可以更快地查找数据。</p><p>用户无法看到索引，它们只能被用来加速搜索/查询。</p><p>更新一个包含索引的表需要比更新一个没有索引的表花费更多的时间，这是由于索引本身也需要更新。因此，理想的做法是仅仅在常常被搜索的列（以及表）上面创建索引。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#在表上创建一个简单的索引。允许使用重复的值：</span><br><span class="line"><span class="keyword">CREATE</span> INDEX index_name <span class="keyword">ON</span> table_name (column_name)</span><br><span class="line">#在表上创建一个唯一的索引。不允许使用重复的值：唯一的索引意味着两个行不能拥有相同的索引值</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX index_name <span class="keyword">ON</span> table_name (column_name)</span><br><span class="line"></span><br><span class="line">#在Persons的LastName和FirstName上建立名为PIndex的索引</span><br><span class="line"><span class="keyword">CREATE</span> INDEX PIndex <span class="keyword">ON</span> Persons (LastName, FirstName)</span><br><span class="line"></span><br><span class="line">#撤销索引</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">DROP</span> INDEX index_name</span><br></pre></td></tr></tbody></table></figure><h3 id="ALTER-TABLE"><a href="#ALTER-TABLE" class="headerlink" title="ALTER TABLE"></a>ALTER TABLE</h3><p>用于在已有的表中添加、删除或修改列</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">ADD</span> column_name datatype#添加列</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> column_name#删除列</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name MODIFY <span class="keyword">COLUMN</span> column_name datatype#修改列数据类型</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons AUTO_INCREMENT<span class="operator">=</span><span class="number">100</span>#让AUTO_INCREMENT 序列以其他的值起始</span><br></pre></td></tr></tbody></table></figure><h3 id="VIEW"><a href="#VIEW" class="headerlink" title="VIEW"></a>VIEW</h3><p>视图是基于 SQL 语句的结果集的可视化的表,视图包含行和列，就像一个真实的表。视图中的字段就是来自一个或多个数据库中的真实的表中的字段</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_name <span class="keyword">AS</span> <span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> <span class="keyword">condition</span>#创建视图</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> [view_name]#查询视图</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> view_name#撤销视图</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2022/05/30/hello-world/"/>
      <url>/2022/05/30/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></tbody></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
